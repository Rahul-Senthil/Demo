{"ast":null,"code":"import _asyncToGenerator from\"D:/React Projects/rental-app/rental/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/React Projects/rental-app/rental/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\React Projects\\\\rental-app\\\\rental\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import axios from'axios';import React,{useEffect,useState}from'react';import jwtDecode from'jwt-decode';import{useParams}from'react-router-dom';import{Carousel}from'react-bootstrap';import{FaHome,FaRupeeSign,FaMobile,FaBed,FaPlusCircle}from'react-icons/fa';import'../css/Account.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Account=function Account(){var _useParams=useParams(),id=_useParams.id;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];useEffect(function(){var fetchPosts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!id){_context.next=5;break;}_context.next=3;return axios.get(\"http://localhost:8000/mypost/\".concat(id)).then(function(res){setPosts(res.data);console.log(res.data);});case 3:_context.next=6;break;case 5:window.location.href='/home';case 6:case\"end\":return _context.stop();}}},_callee);}));return function fetchPosts(){return _ref.apply(this,arguments);};}();fetchPosts();},[]);var deletePost=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(postId){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.delete(\"http://localhost:8000/delete-post/\".concat(postId)).then(function(res){return window.location.href=\"/account/\".concat(id);}).catch(function(err){return console.log(err);});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function deletePost(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"account-container\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"My \",/*#__PURE__*/_jsx(\"span\",{style:{color:\"black\"},children:\"Account\"})]}),/*#__PURE__*/_jsx(\"h3\",{style:{textAlign:\"center\"},children:/*#__PURE__*/_jsxs(\"a\",{href:\"/account/\".concat(id,\"/new-post\"),children:[\"Add New Post \",/*#__PURE__*/_jsx(FaPlusCircle,{})]})}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid account-details\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Your \",/*#__PURE__*/_jsx(\"span\",{style:{color:\"black\"},children:\"Posts\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row mypost\",children:posts.map(function(p){return/*#__PURE__*/_jsxs(\"div\",{className:\"card display-post col-5\",children:[/*#__PURE__*/_jsx(Carousel,{children:p.imgUrl.map(function(i){return/*#__PURE__*/_jsx(Carousel.Item,{className:\"account-carousel-item\",children:/*#__PURE__*/_jsx(\"img\",{src:i.url,alt:\"...\",className:\"carousel-img\"})});})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Location \",/*#__PURE__*/_jsx(FaHome,{})]}),\" : \",p.address]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Contact Number \",/*#__PURE__*/_jsx(FaMobile,{})]}),\" : \",p.mobile]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Rent \",/*#__PURE__*/_jsx(FaRupeeSign,{})]}),\" : \",p.rent]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Bed Rooms \",/*#__PURE__*/_jsx(FaBed,{})]}),\" : \",p.description]}),/*#__PURE__*/_jsx(\"button\",{className:\"details-btn\",onClick:function onClick(){window.location.href=\"/account/\".concat(p._id,\"/edit-post\");},children:\"Edit\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"details-btn\",onClick:function onClick(){return deletePost(p._id);},children:\"Delete\"})]})]});})})]})]});};export default Account;","map":{"version":3,"sources":["D:/React Projects/rental-app/rental/src/components/Account.jsx"],"names":["axios","React","useEffect","useState","jwtDecode","useParams","Carousel","FaHome","FaRupeeSign","FaMobile","FaBed","FaPlusCircle","Account","id","posts","setPosts","fetchPosts","get","then","res","data","console","log","window","location","href","deletePost","postId","delete","catch","err","color","textAlign","map","p","imgUrl","i","url","address","mobile","rent","description","_id"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport React, { useEffect, useState } from 'react'\r\nimport jwtDecode from 'jwt-decode';\r\nimport { useParams } from 'react-router-dom';\r\nimport {Carousel} from 'react-bootstrap';\r\nimport {FaHome, FaRupeeSign, FaMobile, FaBed, FaPlusCircle} from 'react-icons/fa';\r\nimport '../css/Account.css';\r\n\r\nconst Account = () => {\r\n\r\n  const {id} = useParams();\r\n  const [posts, setPosts] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const fetchPosts = async() => {\r\n            if(id)\r\n            {\r\n              await axios.get(`http://localhost:8000/mypost/${id}`)\r\n              .then(res => {\r\n                setPosts(res.data);\r\n                console.log(res.data);\r\n              })\r\n            }\r\n            else{\r\n              window.location.href = '/home';\r\n            }\r\n    }\r\n    fetchPosts();\r\n  },[])\r\n\r\n  const deletePost = async(postId) => {\r\n    await axios.delete(`http://localhost:8000/delete-post/${postId}`)\r\n    .then(res => window.location.href = `/account/${id}`)\r\n    .catch(err => console.log(err))\r\n  }\r\n\r\n  return (\r\n    <div className='account-container'>\r\n      <h1>My <span style={{color: \"black\"}} >Account</span></h1>\r\n      <h3 style={{textAlign: \"center\"}} ><a href={`/account/${id}/new-post`}>Add New Post <FaPlusCircle/></a></h3>\r\n      <hr />\r\n      <div className=\"container-fluid account-details\">\r\n        <h1>Your <span style={{color: \"black\"}}>Posts</span></h1>\r\n        <div className=\"row mypost\">\r\n        {posts.map(p => (\r\n          <div className=\"card display-post col-5\">\r\n            <Carousel>\r\n            {p.imgUrl.map(i => (\r\n                  <Carousel.Item className='account-carousel-item'>\r\n                    <img src={i.url} alt=\"...\" className='carousel-img' />\r\n                  </Carousel.Item>\r\n                ))}\r\n            </Carousel>\r\n            <div className=\"card-body\">\r\n              <p><span>Location <FaHome/></span> : {p.address}</p>\r\n              <p><span>Contact Number <FaMobile/></span> : {p.mobile}</p>\r\n              <p><span>Rent <FaRupeeSign/></span> : {p.rent}</p>\r\n              <p><span>Bed Rooms <FaBed/></span> : {p.description}</p>\r\n              <button className='details-btn' onClick={() => {window.location.href = `/account/${p._id}/edit-post`}}>Edit</button><br />\r\n              <button className='details-btn' onClick={() => deletePost(p._id)}>Delete</button>\r\n            </div>\r\n          </div>\r\n        ))}\r\n        </div>\r\n      \r\n    </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Account;"]},"metadata":{},"sourceType":"module"}