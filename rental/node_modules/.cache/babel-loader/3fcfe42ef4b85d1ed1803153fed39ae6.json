{"ast":null,"code":"import _asyncToGenerator from\"D:/React Projects/rental-app/rental/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/React Projects/rental-app/rental/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\React Projects\\\\rental-app\\\\rental\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import axios from'axios';import React,{useState}from'react';import{useHistory}from'react-router-dom';import'../css/Login.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),customError=_useState2[0],setCustomError=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),loginCustomError=_useState4[0],setLoginCustomError=_useState4[1];var history=useHistory();var registerUsername=/*#__PURE__*/React.createRef();var registerMail=/*#__PURE__*/React.createRef();var registerPassword=/*#__PURE__*/React.createRef();var loginMail=/*#__PURE__*/React.createRef();var loginPassword=/*#__PURE__*/React.createRef();var handleRegister=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var registerCredentials;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:registerCredentials={email_id:registerMail.current.value.trim(),username:registerUsername.current.value.trim(),password:registerPassword.current.value};_context2.next=3;return axios.post(\"http://localhost:8000/auth/validateRegister\",registerCredentials).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(res){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(typeof res.data=='string')){_context.next=5;break;}console.log(res.data);setCustomError(res.data);_context.next=8;break;case 5:console.log(res.data);_context.next=8;return axios.post(\"http://localhost:8000/auth/register\",registerCredentials).then(function(res){console.log(res.data);var jwt=res.data.token;sessionStorage.setItem(\"secretToken\",jwt);window.location.href='/home';}).catch(function(err){return console.log(err);});case 8:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}()).catch(function(err){return console.log(err);});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function handleRegister(){return _ref.apply(this,arguments);};}();var handleLogin=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var loginCredentials;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:loginCredentials={email_id:loginMail.current.value,password:loginPassword.current.value};_context3.next=3;return axios.post(\"http://localhost:8000/auth/login\",loginCredentials).then(function(res){console.log(res.data);var jwt=res.data.token;if(jwt!==undefined){sessionStorage.setItem(\"secretToken\",jwt);window.location.href='/home';}else{console.log(res.data);setLoginCustomError(res.data);}}).catch(function(err){return console.log(err);});case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function handleLogin(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"login-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"login\",children:[/*#__PURE__*/_jsx(\"h1\",{style:{color:\"black\"},children:\"Login\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"login-form\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Email\",ref:loginMail}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",ref:loginPassword}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),loginCustomError?/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:loginCustomError}):'',/*#__PURE__*/_jsx(\"button\",{style:{backgroundColor:\"rgb(236, 89, 138)\",border:\"none\",marginTop:\"30px\"},onClick:handleLogin,children:\"Login\"})]})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"register\",children:[/*#__PURE__*/_jsx(\"h1\",{style:{color:\"black\"},children:\"Register\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"register-form\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Email\",ref:registerMail,required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Username\",ref:registerUsername,required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",ref:registerPassword,required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),customError?/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:customError}):'',/*#__PURE__*/_jsx(\"button\",{style:{backgroundColor:\"rgb(236, 89, 138)\",border:\"none\",marginTop:\"30px\"},onClick:handleRegister,children:\"Register\"})]})})})]})]});};export default Login;","map":{"version":3,"sources":["D:/React Projects/rental-app/rental/src/components/Login.jsx"],"names":["axios","React","useState","useHistory","Login","customError","setCustomError","loginCustomError","setLoginCustomError","history","registerUsername","createRef","registerMail","registerPassword","loginMail","loginPassword","handleRegister","registerCredentials","email_id","current","value","trim","username","password","post","then","res","data","console","log","jwt","token","sessionStorage","setItem","window","location","href","catch","err","handleLogin","loginCredentials","undefined","color","backgroundColor","border","marginTop"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport React, { useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport '../css/Login.css';\r\n\r\nconst Login = () => {\r\n\r\n  const [customError, setCustomError] = useState();\r\n  const [loginCustomError, setLoginCustomError] = useState();\r\n  const history = useHistory();\r\n  const registerUsername = React.createRef();\r\n  const registerMail = React.createRef();\r\n  const registerPassword = React.createRef();\r\n\r\n  const loginMail = React.createRef();\r\n  const loginPassword = React.createRef();\r\n\r\n  const handleRegister = async() => {\r\n    const registerCredentials = {\r\n        email_id: registerMail.current.value.trim(),\r\n        username: registerUsername.current.value.trim(),\r\n        password: registerPassword.current.value\r\n    }\r\n\r\n    await axios.post(\"http://localhost:8000/auth/validateRegister\", registerCredentials)\r\n    .then(async(res) => {\r\n      if(typeof(res.data) == 'string'){\r\n        console.log(res.data);\r\n        setCustomError(res.data);\r\n      }\r\n      else{\r\n        console.log(res.data);\r\n        await axios.post(\"http://localhost:8000/auth/register\", registerCredentials)\r\n        .then(res => {\r\n              console.log(res.data);\r\n              const jwt = res.data.token;\r\n              sessionStorage.setItem(\"secretToken\", jwt);\r\n              window.location.href = '/home';\r\n        })\r\n        .catch(err => console.log(err));\r\n    }\r\n    })\r\n    .catch(err => console.log(err));\r\n\r\n    // await axios.post(\"http://localhost:8000/auth/register\", registerCredentials)\r\n    // .then(res => {\r\n    //   console.log(res.data);\r\n    //   const jwt = res.data.token;\r\n    //   sessionStorage.setItem(\"secretToken\", jwt);\r\n    //   window.location.href = '/posts';\r\n    // })\r\n    // .catch(err => console.log(err));\r\n  }\r\n\r\n  const handleLogin = async() => {\r\n    const loginCredentials = {\r\n        email_id: loginMail.current.value,\r\n        password: loginPassword.current.value\r\n    }\r\n    await axios.post(\"http://localhost:8000/auth/login\", loginCredentials)\r\n    .then(res => {\r\n      console.log(res.data);\r\n      const jwt = res.data.token;\r\n      if(jwt !== undefined)\r\n      {\r\n        sessionStorage.setItem(\"secretToken\", jwt);\r\n        window.location.href = '/home';\r\n      }\r\n      else{\r\n        console.log(res.data);\r\n        setLoginCustomError(res.data);\r\n      }\r\n    })\r\n    .catch(err => console.log(err));\r\n  }\r\n\r\n  return (\r\n    <div className='login-page'>\r\n      <div className=\"login\">\r\n      <h1 style={{color: \"black\"}}>Login</h1>\r\n      <div className='form-container'>\r\n      <div className='login-form'>\r\n      <div>\r\n      <input type=\"text\" placeholder='Email' ref={loginMail}/><br /><br />\r\n      <input type=\"password\" placeholder='Password' ref={loginPassword}/><br /><br />\r\n      {loginCustomError ? <p style={{color: \"red\"}}>{loginCustomError}</p>: ''}\r\n      <button style={{backgroundColor: \"rgb(236, 89, 138)\", border: \"none\", marginTop: \"30px\"}} onClick={handleLogin}>Login</button>\r\n      </div>\r\n      </div>\r\n      </div>\r\n      </div>\r\n\r\n      <div className=\"register\">\r\n      <h1 style={{color: \"black\"}}>Register</h1>\r\n      <div className='form-container'>\r\n      <div className='register-form'>\r\n      <div>\r\n      <input type=\"text\" placeholder='Email' ref={registerMail} required/><br /><br />\r\n      <input type=\"text\" placeholder='Username' ref={registerUsername} required/><br /><br />\r\n      <input type=\"password\" placeholder='Password' ref={registerPassword} required/><br /><br />\r\n      {customError? \r\n      <p style={{color: \"red\"}}>{customError}</p>:''}\r\n      <button style={{backgroundColor: \"rgb(236, 89, 138)\", border: \"none\", marginTop: \"30px\"}} onClick={handleRegister}>Register</button>\r\n      </div>\r\n      </div>\r\n      </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}