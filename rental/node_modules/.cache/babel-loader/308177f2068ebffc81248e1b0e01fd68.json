{"ast":null,"code":"import _asyncToGenerator from\"D:/React Projects/rental-app/rental/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/React Projects/rental-app/rental/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\React Projects\\\\rental-app\\\\rental\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import axios from'axios';import React,{useEffect,useState}from'react';import{useParams}from'react-router-dom';import jwtDecode from'jwt-decode';import'../css/Post.css';import{Carousel}from'react-bootstrap';import{FaHome,FaRupeeSign,FaPhoneAlt,FaBed}from'react-icons/fa';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Post=function Post(){var _useParams=useParams(),id=_useParams.id;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),img=_useState6[0],setImg=_useState6[1];useEffect(function(){var fetchPost=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var token,_user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"Post id: \",id);token=sessionStorage.getItem(\"secretToken\");console.log(token);if(token){_user=jwtDecode(token);console.log(\"user id: \",_user.currentUser);setUser(_user.currentUser);}_context.next=6;return axios.get(\"http://localhost:8000/specific-post/\".concat(id)).then(function(res){setPost(res.data);setImg(res.data.imgUrl);console.log(res.data);}).catch(function(err){return console.log(err);});case 6:case\"end\":return _context.stop();}}},_callee);}));return function fetchPost(){return _ref.apply(this,arguments);};}();fetchPost();},[]);var deletePost=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.delete(\"http://localhost:8000/delete-post/\".concat(id)).then(function(res){return window.location.href=\"/account/\".concat(user);}).catch(function(err){return console.log(err);});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function deletePost(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid post-details\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-7\",children:/*#__PURE__*/_jsx(Carousel,{children:img.map(function(i){return/*#__PURE__*/_jsx(Carousel.Item,{className:\"carousel-item\",children:/*#__PURE__*/_jsx(\"img\",{src:i.url,alt:\"...\",className:\"carousel-img\"})});})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-5 details\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Details\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Location \",/*#__PURE__*/_jsx(FaHome,{})]}),\" : \",post.address]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Contact Number \",/*#__PURE__*/_jsx(FaPhoneAlt,{})]}),\" : \",post.mobile]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Rent \",/*#__PURE__*/_jsx(FaRupeeSign,{})]}),\" : \",post.rent]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Bed Rooms \",/*#__PURE__*/_jsx(FaBed,{})]}),\" : \",post.description]}),post.author_id===user?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){window.location.href=\"/account/\".concat(id,\"/edit-post\");},children:\"Edit\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return deletePost(post._id);},children:\"Delete\"})]}):'']})]})});};export default Post;","map":{"version":3,"sources":["D:/React Projects/rental-app/rental/src/components/Post.jsx"],"names":["axios","React","useEffect","useState","useParams","jwtDecode","Carousel","FaHome","FaRupeeSign","FaPhoneAlt","FaBed","Post","id","post","setPost","user","setUser","img","setImg","fetchPost","console","log","token","sessionStorage","getItem","currentUser","get","then","res","data","imgUrl","catch","err","deletePost","delete","window","location","href","map","i","url","address","mobile","rent","description","author_id","_id"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport React, { useEffect, useState } from 'react'\r\nimport { useParams } from 'react-router-dom';\r\nimport jwtDecode from 'jwt-decode';\r\nimport '../css/Post.css';\r\nimport {Carousel} from 'react-bootstrap';\r\nimport {FaHome, FaRupeeSign, FaPhoneAlt, FaBed} from 'react-icons/fa';\r\nconst Post = () => {\r\n  const { id } = useParams();\r\n  const [post, setPost] = useState([]);\r\n  const [user, setUser] = useState();\r\n  const [img, setImg] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const fetchPost= async() => {\r\n    console.log(\"Post id: \", id);\r\n    const token = sessionStorage.getItem(\"secretToken\");\r\n    console.log(token);\r\n    if(token)\r\n    {\r\n        const user = jwtDecode(token);\r\n        console.log(\"user id: \", user.currentUser);\r\n        setUser(user.currentUser);\r\n    }\r\n    await axios.get(`http://localhost:8000/specific-post/${id}`)\r\n    .then(res => {\r\n        setPost(res.data);\r\n        setImg(res.data.imgUrl)\r\n        console.log(res.data);\r\n    }\r\n    )\r\n    .catch(err => console.log(err));\r\n}\r\nfetchPost()\r\n},[])\r\n\r\nconst deletePost = async(id) => {\r\n  await axios.delete(`http://localhost:8000/delete-post/${id}`)\r\n  .then(res => window.location.href = `/account/${user}`)\r\n  .catch(err => console.log(err))\r\n}\r\n\r\n  return (\r\n    <div className=\"container-fluid post-details\">\r\n      <div className=\"row\">\r\n        <div className=\"col-7\">\r\n          <Carousel>\r\n          {img.map(i => (\r\n                <Carousel.Item className='carousel-item'>\r\n                  <img src={i.url} alt=\"...\" className='carousel-img' />\r\n                </Carousel.Item>\r\n              ))}\r\n          </Carousel>\r\n        </div>\r\n        <div className='col-5 details'> \r\n            <h1>Details</h1>\r\n            <p><span>Location <FaHome/></span> : {post.address}</p>\r\n            <p><span>Contact Number <FaPhoneAlt/></span> : {post.mobile}</p>\r\n            <p><span>Rent <FaRupeeSign/></span> : {post.rent}</p>\r\n            <p><span>Bed Rooms <FaBed/></span> : {post.description}</p>\r\n            {post.author_id === user? \r\n              <div>\r\n                <button onClick={() => {window.location.href = `/account/${id}/edit-post`}}>Edit</button><br />\r\n                <button onClick={() => deletePost(post._id)}>Delete</button>\r\n              </div>: ''}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Post\r\n"]},"metadata":{},"sourceType":"module"}